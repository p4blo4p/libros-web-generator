<!DOCTYPE html>
<html lang="{{ lang }}">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="{{ libro['description'] | default('') }}"
    />
    <meta name="keywords" content="{{ libro['categories'] | default('') }}" />
    <meta name="author" content="{{ libro['author'] | default('') }}" />
    <title>{{ libro['title'] | default('') }}</title>
    <link rel="canonical" href="dump" /> <!-- Si esto fuera din√°mico y externo, aplicar√≠as el filtro -->
    <!-- Open Graph Meta Tags for social media -->
    <meta property="og:title" content="{{ libro['title'] | default('') }}" />
    <meta
      property="og:description"
      content="{{ libro['description'] | default('') }}"
    />
    <meta
      property="og:image"
      content="{{ libro['image_url'] | ensure_https | default('') }}" 
    />
    <meta property="og:url" content="dump" /> <!-- Si esto fuera din√°mico y externo, aplicar√≠as el filtro -->
    <meta property="og:type" content="website" />
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="{{ libro['title'] | default('') }}" />
    <meta
      name="twitter:description"
      content="{{ libro['description'] | default('') }}"
    />
    <meta
      name="twitter:image"
      content="{{ libro['image_url'] | ensure_https | default('') }}" 
    />
    <!-- Favicon -->
    <link
      rel="icon"
      href="{{ libro['image_url'] | ensure_https | default('') }}" 
      type="image/x-icon"
    />
    <!-- CSS Stylesheets -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/theme.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/searchbar.css') }}"
    />
    <!-- Structured Data -->
    <script type="application/ld+json" defer>
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "{{ libro['title'] | default('') }}",
        "description": "{{ libro['description'] | default('') }}",
        "url": "dump" <!-- Si esto fuera din√°mico y externo, aplicar√≠as el filtro -->
      }
    </script>
  </head>
  <body>
    <div class="header">
      <a class="button" href="{{ url_for('index', lang=lang) }}"
        >{{ t('back_to_list') }}</a
      >
      <a
        class="button"
        href="{{ url_for('author_books', author=libro['author']) }}"
        >{{ libro['author'] }}</a
      >
      <a
        class="button"
        href="{{ url_for('book_versions', author=libro['author'], book=libro['title']) }}"
        >{{ libro['title'] }}</a
      >
    </div>
    <div class="google-search-container">
      <span class="search-icon">
        <svg
          focusable="false"
          xmlns="http://www.w3.org/2000/svg"
          viewbox="0 0 24 24"
          fill="#9aa0a6"
        >
          <path
            d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
          ></path>
        </svg>
      </span>
      <input
        type="text"
        class="google-search-input"
        placeholder="Search Title, Author or ISBN"
      />
      <span class="mic-icon">
      </span>
    </div>

    <div class="book-display-full">
      <div class="book-cover">
        <img
          src="{{ libro['image_url'] | ensure_https | default('') }}" 
          alt="Portada de {{ libro['title'] }}"
          loading="lazy" />
      </div>
      <div class="book-info">
        <h2> <a
        
        href="{{ url_for('book_versions', author=libro['author'], book=libro['title']) }}"
                >{{ libro['title'] | default('') }}</a></h2>
        <h3>{{ libro['subtitle'] | default('') }}</h3>
        <h3>
          <a href="{{ url_for('author_books', author=libro['author']) }}"
            >{{ libro['author'] | default('') }}</a
          >
        </h3>
      </div>
      <div class="book-details">
        {% if libro['isbn10'] | default(None) %}
        <p><strong>{{ t('isbn10') }}:</strong> {{ libro['isbn10'] }}</p>
        {% endif %} {% if libro['isbn13'] | default(None) %}
        <p><strong>{{ t('isbn13') }}:</strong> {{ libro['isbn13'] }}</p>
        {% endif %} {% if libro['subtitle'] | default(None) %}
        <p><strong>{{ t('subtitle') }}:</strong> {{ libro['subtitle'] }}</p>
        {% endif %} {% if libro['language'] | default(None) %}
        <p><strong>{{ t('language') }}:</strong> {{ libro['language'] }}</p>
        {% endif %} {# Note: This will also hide the label if categories is an
        empty list/string #} {% if libro['categories'] | default(None) %}
        <p><strong>{{ t('categories') }}:</strong> {{ libro['categories'] }}</p>
        {% endif %} {% if libro['description'] | default(None) %}
        <p>
          <strong>{{ t('description') }}:</strong> {{ libro['description'] }}
        </p>
        {% endif %} {% if libro['series'] | default(None) %}
        <p><strong>{{ t('series') }}:</strong> {{ libro['series'] }}</p>
        {% endif %} {% if libro['edition'] | default(None) %}
        <p><strong>{{ t('edition') }}:</strong> {{ libro['edition'] }}</p>
        {% endif %} {% if libro['firstPublishDate'] | default(None) %}
        <p>
          <strong>{{ t('firstPublishDate') }}:</strong> {{
          libro['firstPublishDate'] }}
        </p>
        {% endif %} {# Note: This will hide the label if published_year is 0 or
        empty #} {% if libro['published_year'] | default(None) %}
        <p>
          <strong>{{ t('published_year') }}:</strong> {{ libro['published_year']
          }}
        </p>
        {% endif %} {# Note: This will also hide the label if characters is an
        empty list/string #} {% if libro['characters'] | default(None) %}
        <p><strong>{{ t('characters') }}:</strong> {{ libro['characters'] }}</p>
        {% endif %} {# Note: This will also hide the label if genres is an empty
        list/string #} {% if libro['genres'] | default(None) %}
        <p><strong>{{ t('genres') }}:</strong> {{ libro['genres'] }}</p>
        {% endif %} {% if libro['asin'] | default(None) %}
        <p><strong>{{ t('asin') }}:</strong> {{ libro['asin'] }}</p>
        {% endif %} {# Note: This will hide the label if average_rating is 0 or
        empty #} {% if libro['average_rating'] | default(None) %}
        <p>
          <strong>{{ t('average_rating') }}:</strong> {{ libro['average_rating']
          }}
        </p>
        {% endif %} {# Note: This will also hide the label if awards is an empty
        list/string #} {% if libro['awards'] | default(None) %}
        <p><strong>{{ t('awards') }}:</strong> {{ libro['awards'] }}</p>
        {% endif %} {# Note: This will hide the label if ratingsByStars is empty
        (e.g., {}, [], '') #} {% if libro['ratingsByStars'] | default(None) %}
        <p>
          <strong>{{ t('ratingsByStars') }}:</strong> {{ libro['ratingsByStars']
          }}
        </p>
        {% endif %} {# Note: This will hide the label if bbeVotes is 0 or empty
        #} {% if libro['bbeVotes'] | default(None) %}
        <p><strong>{{ t('bbeVotes') }}:</strong> {{ libro['bbeVotes'] }}</p>
        {% endif %} {# Note: This will hide the label if numRatings is 0 or
        empty #} {% if libro['numRatings'] | default(None) %}
        <p><strong>{{ t('numRatings') }}:</strong> {{ libro['numRatings'] }}</p>
        {% endif %} {% if libro['product_dimensions'] | default(None) %}
        <p>
          <strong>{{ t('product_dimensions') }}:</strong> {{
          libro['product_dimensions'] }}
        </p>
        {% endif %} {% if libro['publisher'] | default(None) %}
        <p><strong>{{ t('publisher') }}:</strong> {{ libro['publisher'] }}</p>
        {% endif %} {% if libro['soldBy'] | default(None) %}
        <p><strong>{{ t('soldBy') }}:</strong> {{ libro['soldBy'] }}</p>
        {% endif %} {% if libro['weight'] | default(None) %}
        <p><strong>{{ t('weight') }}:</strong> {{ libro['weight'] }}</p>
        {% endif %}
        <div class="amazon-buttons">
          <a
            href="https://www.amazon.com/dp/example?tag=affiliateID"
            class="amazon-button"
            >Buy it Amazon
          </a>
          <!-- Las URLs de flagcdn.com ya son HTTPS, no necesitan el filtro -->
          <a
            href="https://www.amazon.com/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/us.svg" alt="üá∫üá∏" class="flag" loading="lazy" />
            <span class="domain">Amazon.com</span>
          </a>
          <a
            href="https://www.amazon.ca/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/ca.svg" alt="üá®üá¶" class="flag" loading="lazy" />
            <span class="domain">Amazon.ca</span>
          </a>
          <a
            href="https://www.amazon.co.uk/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/gb.svg" alt="üá¨üáß" class="flag" loading="lazy" />
            <span class="domain">Amazon.co.uk</span>
          </a>
          <a
            href="https://www.amazon.de/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/de.svg" alt="üá©üá™" class="flag" loading="lazy" />
            <span class="domain">Amazon.de</span>
          </a>
          <a
            href="https://www.amazon.fr/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/fr.svg" alt="üá´üá∑" class="flag" loading="lazy" />
            <span class="domain">Amazon.fr</span>
          </a>
          <a
            href="https://www.amazon.it/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/it.svg" alt="üáÆüáπ" class="flag" loading="lazy" />
            <span class="domain">Amazon.it</span>
          </a>
          <a
            href="https://www.amazon.es/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/es.svg" alt="üá™üá∏" class="flag" loading="lazy" />
            <span class="domain">Amazon.es</span>
          </a>
          <a
            href="https://www.amazon.com.mx/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/mx.svg" alt="üá≤üáΩ" class="flag" loading="lazy" />
            <span class="domain">Amazon.com.mx</span>
          </a>
          <a
            href="https://www.amazon.co.jp/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/jp.svg" alt="üáØüáµ" class="flag" loading="lazy" />
            <span class="domain">Amazon.co.jp</span>
          </a>
          <a
            href="https://www.amazon.in/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/in.svg" alt="üáÆüá≥" class="flag" loading="lazy" />
            <span class="domain">Amazon.in</span>
          </a>
          <a
            href="https://www.amazon.com.br/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/br.svg" alt="üáßüá∑" class="flag" loading="lazy" />
            <span class="domain">Amazon.com.br</span>
          </a>
          <a
            href="https://www.amazon.com.au/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/au.svg" alt="üá¶üá∫" class="flag" loading="lazy" />
            <span class="domain">Amazon.com.au</span>
          </a>
          <a
            href="https://www.amazon.nl/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/nl.svg" alt="üá≥üá±" class="flag" loading="lazy" />
            <span class="domain">Amazon.nl</span>
          </a>
          <a
            href="https://www.amazon.sg/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/sg.svg" alt="üá∏üá¨" class="flag" loading="lazy" />
            <span class="domain">Amazon.sg</span>
          </a>
          <a
            href="https://www.amazon.ae/dp/example?tag=affiliateID"
            class="amazon-button"
          >
            <img src="https://flagcdn.com/ae.svg" alt="üá¶üá™" class="flag" loading="lazy" />
            <span class="domain">Amazon.ae</span>
          </a>
        </div>
      </div>
    </div>
  <div class="footer">
      <a class="button" href="{{ url_for('index', lang=lang) }}"
        >{{ t('back_to_list') }}</a
      >
      <a
        class="button"
        href="{{ url_for('author_books', author=libro['author']) }}"
        >{{ libro['author'] }}</a
      >
      <a
        class="button"
        href="{{ url_for('book_versions', author=libro['author'], book=libro['title']) }}"
        >{{ libro['title'] }}</a
      >
    </div>
    <div class="disclaimer">
      <strong>Aviso Importante:</strong> Como Afiliado de Amazon, gano por las
      compras y registros cualificados que se realicen a trav√©s de mis enlaces.
      Las im√°genes de logos se utilizan con fines ilustrativos.
    </div>
  </body>
</html>